// Code generated by Wire. DO NOT EDIT.

//go:generate wire
//+build !wireinject

package server

import (
	"github.com/redhat-marketplace/redhat-marketplace-operator/metering/v2/internal/metrics"
	"github.com/redhat-marketplace/redhat-marketplace-operator/metering/v2/pkg/engine"
	"github.com/redhat-marketplace/redhat-marketplace-operator/metering/v2/pkg/processors"
	"time"
)

import (
	_ "k8s.io/client-go/plugin/pkg/client/auth"
)

// Injectors from wire.go:

func NewServer(opts *Options) (*Service, error) {
	options := ConvertOptions(opts)
	registry := provideRegistry()
	context := provideContext()
	namespaces := ProvideNamespaces(opts)
	scheme := provideScheme()
	clientOptions := getClientOptions()
	logger := _wireLoggerValue
	prometheusData := metrics.ProvidePrometheusData()
	statusFlushDuration := _wireStatusFlushDurationValue
	engineEngine, err := engine.NewEngine(context, namespaces, scheme, clientOptions, logger, prometheusData, statusFlushDuration)
	if err != nil {
		return nil, err
	}
	service := &Service{
		opts:            options,
		metricsRegistry: registry,
		engine:          engineEngine,
		prometheusData:  prometheusData,
	}
	return service, nil
}

var (
	_wireLoggerValue              = log
	_wireStatusFlushDurationValue = processors.StatusFlushDuration(time.Minute)
)
